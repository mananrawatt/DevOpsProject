import logging
import os

def setup_logging():
    # Set the log directory path
    log_dir = '/Users/mananrawat/Desktop/Project/UPDATED CODEE/DevOpsProject/LOGS'

    # Create the 'LOGS' directory if it doesn't exist
    try:
        if not os.path.exists(log_dir):
            os.makedirs(log_dir)
            print(f"Directory {log_dir} created successfully.")
        else:
            print(f"Directory {log_dir} already exists.")
    except Exception as e:
        print(f"Failed to create directory: {e}")
        return

    # Set the log file path
    log_file = os.path.join(log_dir, 'app.log')

    # Check if we have permission to write to the directory
    if not os.access(log_dir, os.W_OK):
        print(f"Cannot write to directory: {log_dir}")
        return

    # Configure logging to save logs in the specified file with a .log extension
    try:
        logging.basicConfig(
            filename=log_file,  # Save logs to 'LOGS/app.log'
            level=logging.INFO,  # Log level
            format='%(asctime)s - %(levelname)s - %(message)s',
            filemode='a'  # Append to the log file instead of overwriting
        )

        # Optional: Add a console handler if you want to see logs in the terminal too
        console_handler = logging.StreamHandler()
        console_handler.setLevel(logging.INFO)
        formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s')
